<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
    <script src="https://unpkg.com/aframe-controller-cursor-component@0.2.7/dist/aframe-controller-cursor-component.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>
    <script src="easyrtc/easyrtc.js"></script>
    <script src="https://unpkg.com/@editvr/aframe-dialog-popup-component@1.7.2/dist/aframe-dialog-popup-component.min.js"></script>

    <script src="https://unpkg.com/aframe-play-sound-on-event@1.0.2/dist/aframe-play-sound-on-event.min.js"></script>
    <script src="https://unpkg.com/aframe-lensflare-component/dist/aframe-lensflare-component.min.js"></script>
    <script src="js/travel-node-component.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
    <script src="js/spawn-in-circle.component.js"></script>
    <script src="games-list.js"></script>
    <script src="nav.js"></script>
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
      integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
      crossorigin="anonymous"
    />

    <!-- Plugin CSS -->
    <link rel="stylesheet" href="assets/css/plugin.css" />

    <!-- Main CSS -->
    <link rel="stylesheet" href="assets/css/dark.css" />

    <!-- Responsive CSS -->
    <link rel="stylesheet" href="assets/css/responsive.css" />
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- load external script files -->

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
    <script>
      AFRAME.registerComponent("typer", {
        dependencies: ["text", "sound__typer", "sound__beep"],

        schema: {
          message: { type: "string" },
          speed: { type: "int", default: 50 },
          prefix: { type: "string" },
          // suffix:      { type: 'string' },
          cursorChar: { type: "string", default: "|" },
          cursorSpeed: { type: "int", default: 500 },
          wrapChar: { type: "string", default: "\\" },
          on: { type: "string", default: "loaded" }
          // sound assets
        },

        init: function() {
          // this.wrapCount = this.el.components.text.data.wrapCount;
          this.cursorVisible = true;
          this.output = "";
          this.char = 0;

          // Throttle the function to only occur at the defined intervals within tick
          // this.printMessage = AFRAME.utils.throttle(this.printMessage, this.data.speed, this);

          this.el.addEventListener(
            this.data.on,
            function(e) {
              console.log("clicked");

              console.log(this.output);
              console.log(this.char);

              if (this.timer) {
                console.log("interval exists");
                clearInterval(this.timer);
                this.timer = null;
                this.char = 0;
                this.output = "";
                // this.el.setAttribute('text', 'value' , '');
                this.el.components.sound__typer.stopSound();
                return;
              }

              // Using instead of throttled tick function
              this.timer = setInterval(
                this.printMessage.bind(this),
                this.data.speed
              );
            }.bind(this)
          );
        },

        tick: function() {
          // Throttled function.
          // this.printMessage();
        },

        printMessage: function() {
          if (this.char < this.data.message.length) {
            if (this.char === 0) {
              this.el.components.sound__typer.playSound();
            }

            if (this.data.message.charAt(this.char) === this.data.wrapChar) {
              // console.log('found');
              this.el.components.sound__typer.stopSound();
              this.el.components.sound__typer.playSound();
            }

            // this.output += this.data.prefix;
            this.output += this.data.message.charAt(this.char);
            // this.output += this.data.suffix;
            this.el.setAttribute(
              "text",
              "value",
              this.data.prefix + this.output + this.data.cursorChar
            );
          } else if (this.char >= this.data.message.length) {
            if (this.char === this.data.message.length) {
              this.el.components.sound__typer.stopSound();
              this.el.components.sound__beep.playSound();
              // this.el.emit('beep');
            }

            if (this.char % (this.data.cursorSpeed / this.data.speed) === 0) {
              this.cursorVisible = !this.cursorVisible;

              this.el.setAttribute(
                "text",
                "value",
                this.output + (this.cursorVisible ? " " : this.data.cursorChar)
              );
            }
          }

          this.char++;
        }
      });
    </script>
  </head>
  <body>
    <div id="preloader">
      <div class="loader-logo text-center">
        <img
          src="https://cdn.glitch.com/a1f36298-9f74-4b84-b0cd-fb96b98893cc%2Fswell.png"
          alt=""
        />
        <p>UPLOADING<br />CHRISTOPHER</p>
      </div>
    </div>
    <header>
      <nav>
        <div class="logo">
          <a href="/navigation-centre.html"
            ><img
              src="https://cdn.glitch.com/a1f36298-9f74-4b84-b0cd-fb96b98893cc%2Fswellss.png"
              alt="logo"
          /></a>
        </div>
        <div class="toggle-btn">
          <div class="burger-menu">
            <span class="one"></span>
            <span class="two"></span>
            <span class="tre"></span>
          </div>
        </div>

        <div class="bg-nav"></div>

        <div class="manu-container">
          <div class="menu">
            <div class="data">
              <div class="container">
                <div class="row">
                  <div class="col-lg-6">
                    <div class="links text-center text-lg-left">
                      <ul>
                        <li>
                          <a class="menu-link active" href="./ar.html"
                            >Build Your Own AR Website</a
                          >
                        </li>
                        <li>
                          <a class="menu-link" href="/navigation-centre.html"
                            >Explore my XR Browser</a
                          >
                        </li>
                        <li>
                          <a class="menu-link" href="/models.html"
                            >3D Model Viewer</a
                          >
                        </li>

                        <li>
                          <a class="menu-link" href="#" data-scroll-nav="7"
                            >Contact</a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>

                  <div class="col-lg-4 offset-lg-2 centered text-right">
                    <div class="address-menu">
                      <a class="menu-link" href="/models.html">XR Index</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <a-scene>
      <a-assets>
        <audio
          id="click-sound"
          crossorigin="anonymous"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"
        ></audio>
        <img
          src="https://cdn.glitch.com/a1f36298-9f74-4b84-b0cd-fb96b98893cc%2Fflare1.jpg"
          alt="Test Lensflare Asset"
          id="flare-asset"
        />
        <img
          src="https://cdn.glitch.com/a1f36298-9f74-4b84-b0cd-fb96b98893cc%2Fflare2.jpg"
          alt="Test Lensflare Asset 2"
          id="flare-asset-2"
        />
        <img
          src="https://cdn.glitch.com/a1f36298-9f74-4b84-b0cd-fb96b98893cc%2Fflare3.jpg"
          alt="Test Lensflare Asset 3"
          id="flare-asset-3"
        />
        <img
          id="logo"
          crossorigin="anonymous"
          src="https://cdn.glitch.com/a1f36298-9f74-4b84-b0cd-fb96b98893cc%2Fswell.png"
        />
        <img
          id="sky"
          src="https://cdn.glitch.com/a1f36298-9f74-4b84-b0cd-fb96b98893cc%2Fdome.jpeg"
        />
      </a-assets>
      <a-camera look-controls cursor="rayOrigin: mouse" position="0 2 0.255">
        <!--a-entity
        animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.01 0.01 0.01; to: 0.02 0.02 0.02"
        animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 0.02 0.02 0.02; to: 0.01 0.01 0.01"
        animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 0.02 0.02 0.02"
        cursor="fuse: true;"
        material="color: white; shader: flat"
        position="0 0 -1"
        geometry="primitive: ring"></a-entity> -->
      </a-camera>

      <a-entity id="leftHand" hand-controls="left" controller-cursor></a-entity>
      <a-entity
        id="rightHand"
        hand-controls="right"
        controller-cursor
      ></a-entity>

      <a-entity id="catalog" scale=".4 .4 .4" position="0 1.25 -1.05">
        <a-entity
          class="container"
          id="container"
          position="-3.15 4 0"
        ></a-entity>
        <a-entity id="arrows" position="0 .3 .2">
          <a-image
            src="https://cdn.glitch.com/7036ea17-bd25-4354-8908-113fffc09696%2Farrow.png?v=1581554812160"
            id="nextArrow"
            position="1 0 0"
            width=".4"
            height=".25"
            rotation="0 0 90"
            clickable
            onclick="goNext();"
          ></a-image>

          <a-text
            id="pageCounter"
            position="-.1 0 0"
            value="1"
            align="center"
          ></a-text>
          <a-text
            id="pageTotal"
            position=".08 0 0"
            value="/3"
            align="center"
          ></a-text>
          <a-image
            src="https://cdn.glitch.com/7036ea17-bd25-4354-8908-113fffc09696%2Farrow.png?v=1581554812160"
            id="backArrow"
            position="-1 0 0"
            width=".4"
            height=".25"
            rotation="0 0 -90"
            clickable
            onclick="goBack();"
          ></a-image>
        </a-entity>

        <a-entity id="menu" position="-3.06 4.98 0" scale=".35 .35 .35">
          <a-entity
            link="href: index.html"
            geometry="primitive: plane; width: 3.4; height: 1"
            material="color: #FF926B"
            text="align:center; value:Home; width:10;"
            position="0 0 0"
          >
          </a-entity>
          <a-entity
            link="href: chatrooms.html"
            geometry="primitive: plane; width: 3.4; height: 1"
            material="color: #FF926B"
            text="align:center; value: WebVR; width:10;"
            position="3.5 0 0"
          >
          </a-entity>
          <a-entity
            link="href: meditations.html"
            geometry="primitive: plane; width: 3.4; height: 1"
            material="color: #FF926B"
            text="align:center; value: Lifestyle; width:10;"
            position="7 0 0"
          >
          </a-entity>
          <a-entity
            link="href: webar.html"
            geometry="primitive: plane; width: 3.4; height: 1"
            material="color: #FF926B"
            text="align:center; value: WebAR; width:10;"
            position="10.5 0 0"
          >
          </a-entity>
          <a-entity
            link="href: music.html"
            geometry="primitive: plane; width: 3.4; height: 1"
            material="color: #FF926B"
            text="align:center; value: Music; width:10;"
            position="14 0 0"
          >
          </a-entity>
          <a-entity
            link="href: broadcasting.html"
            geometry="primitive: plane; width: 3.4; height: 1"
            material="color: #111"
            text="align:center; value: Social; width:10;"
            position="17.5 0 0"
          >
          </a-entity>
        </a-entity>
      </a-entity>
      <a-sky src="#sky"></a-sky>
      <a-plane
        class="link"
        height="1"
        width="1"
        position="-3.61613 1.22 -1.74849"
        rotation="0.26 29.999999999999996 0"
        material="shader: flat; src: #logo"
        sound="on: click; src: #click-sound"
        update-raycaster="#cursor"
        event-set__enter="_event: mouseenter; _target: #Text2; visible: true"
        event-set__leave="_event: mouseleave; _target: #Text2; visible: false"
      >
        <a-text
          id="Text2"
          value="This is your SuperCruisr Suit."
          align="center"
          color="#FFF"
          visible="false"
          position="0 -0.55 0.55"
          geometry="primitive: plane; width: 3"
          material="color: #000; opacity: 0.75;"
        ></a-text>
      </a-plane>

      <a-icosahedron
        travel-node="transition: move"
        color="#FF926B"
        radius="0.25"
        position="-2.83815 1.03616 -4.50222"
        material="normalMap: true; roughness: 0; metalness: 0.3;  transparent: true; opacity: 1"
        geometry=""
        event-set__enter="_event: mouseenter; _target: #Text; visible: true"
        event-set__leave="_event: mouseleave; _target: #Text; visible: false"
      >
        <a-text
          id="Text"
          value="This is a checkpoint"
          align="center"
          color="#FFF"
          visible="false"
          position="0 -0.55 0.55"
          geometry="primitive: plane; width: 2"
          material="color: #000; opacity: 0.25;"
        ></a-text>
      </a-icosahedron>
      <a-icosahedron
        travel-node="transition: move; axis: x,z; offsetX: 0; offsetY: 0; offsetZ: 0; animationDur: 100; animationEasing: linear; travelTarget: #null"
        color="#FF926B"
        radius="0.25"
        position="18.15867 1.03616 0.24634"
        material="normalMap: true; roughness: 0; metalness: 0.3; transparent: true"
        geometry=""
        event-set__enter="[object Object]"
        event-set__leave="[object Object]"
      >
        <a-text
          id="Text1"
          value="This is a checkpoint"
          align="center"
          color="#FFF"
          visible="false"
          position="0 -0.55 0.55"
          geometry="primitive: plane; width: 2"
          material="color: #000; opacity: 0.25"
          text=""
        ></a-text>
      </a-icosahedron>
      <a-entity
        geometry="primitive: plane; height: 2; width: 0.5"
        material="opacity: 0"
        typer="message: This is a web based platform that can be accessed from any browser on any device.\n\nClick on one of the items in front of you to start exploring.\n\n; on: click"
        text="value: This is a web based platform that can be accessed |; align: center; color: white; width: 2.8; zOffset: 0.01; letterSpacing: -1; tabSize: 1; side: double"
        position="0 1.0255 -0.80497"
        sound__typer="src: undefined; loop: true"
        sound__beep="src: undefined"
        rotation="-29.999999999999996 0 0"
        scale="0.5 0.5 0.25"
      ></a-entity>
      <a-light
        id="flare-5"
        color="grey"
        lensflare="createLight: false; relative: true; src: #flare-asset-3; position:20 0.0 0.06; intensity:15"
        position="35.737 2.61331 -6.50399"
        animation="property: position; to:20 10 -9;loop:true; easing: easeInOutQuad; dir: alternate; dur:2048"
      >
      </a-light>

      <a-light
        id="flare-6"
        color="grey"
        lensflare="createLight: false; relative: true; src: #flare-asset-3; position:0.0 0.0 0.06; intensity:10"
        position="-3 9 -6"
        animation="property: position; to:0 10 -9;loop:true; easing: easeInOutQuad; dir: alternate; dur:2048"
      >
      </a-light>
      <a-plane
        rotation=""
        position="0 1. -1.43578"
        color="#111"
        scale="2 5 5"
        material="shader: flat"
        geometry=""
      ></a-plane>

      <a-plane
        rotation="90 0 0"
        position="0 3.49 -0.450"
        color="#111"
        scale="2 2 5"
        material="shader: flat"
        geometry=""
      ></a-plane>
    </a-scene>
    <script src="assets/js/plugin.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
