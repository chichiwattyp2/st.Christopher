<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
    <script src="https://unpkg.com/aframe-controller-cursor-component@0.2.7/dist/aframe-controller-cursor-component.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>

    <script src="https://unpkg.com/networked-aframe@^0.6.0/dist/networked-aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>
    <script src="easyrtc/easyrtc.js"></script>

    <script src="https://unpkg.com/aframe-play-sound-on-event@1.0.2/dist/aframe-play-sound-on-event.min.js"></script>

    <script src="js/travel-node-component.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>

    <script src="games-list.js"></script>

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
      integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
      crossorigin="anonymous"
    />

    <!-- Plugin CSS -->
    <link rel="stylesheet" href="assets/css/plugin.css" />

    <!-- Main CSS -->
    <link rel="stylesheet" href="assets/css/dark.css" />

    <!-- Responsive CSS -->
    <link rel="stylesheet" href="assets/css/responsive.css" />
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- load external script files -->

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
    <script>
      AFRAME.registerComponent("typer", {
        dependencies: ["text", "sound__typer", "sound__beep"],

        schema: {
          message: { type: "string" },
          speed: { type: "int", default: 50 },
          prefix: { type: "string" },
          // suffix:      { type: 'string' },
          cursorChar: { type: "string", default: "|" },
          cursorSpeed: { type: "int", default: 500 },
          wrapChar: { type: "string", default: "\\" },
          on: { type: "string", default: "loaded" }
          // sound assets
        },

        init: function() {
          // this.wrapCount = this.el.components.text.data.wrapCount;
          this.cursorVisible = true;
          this.output = "";
          this.char = 0;

          // Throttle the function to only occur at the defined intervals within tick
          // this.printMessage = AFRAME.utils.throttle(this.printMessage, this.data.speed, this);

          this.el.addEventListener(
            this.data.on,
            function(e) {
              console.log("clicked");

              console.log(this.output);
              console.log(this.char);

              if (this.timer) {
                console.log("interval exists");
                clearInterval(this.timer);
                this.timer = null;
                this.char = 0;
                this.output = "";
                // this.el.setAttribute('text', 'value' , '');
                this.el.components.sound__typer.stopSound();
                return;
              }

              // Using instead of throttled tick function
              this.timer = setInterval(
                this.printMessage.bind(this),
                this.data.speed
              );
            }.bind(this)
          );
        },

        tick: function() {
          // Throttled function.
          // this.printMessage();
        },

        printMessage: function() {
          if (this.char < this.data.message.length) {
            if (this.char === 0) {
              this.el.components.sound__typer.playSound();
            }

            if (this.data.message.charAt(this.char) === this.data.wrapChar) {
              // console.log('found');
              this.el.components.sound__typer.stopSound();
              this.el.components.sound__typer.playSound();
            }

            // this.output += this.data.prefix;
            this.output += this.data.message.charAt(this.char);
            // this.output += this.data.suffix;
            this.el.setAttribute(
              "text",
              "value",
              this.data.prefix + this.output + this.data.cursorChar
            );
          } else if (this.char >= this.data.message.length) {
            if (this.char === this.data.message.length) {
              this.el.components.sound__typer.stopSound();
              this.el.components.sound__beep.playSound();
              // this.el.emit('beep');
            }

            if (this.char % (this.data.cursorSpeed / this.data.speed) === 0) {
              this.cursorVisible = !this.cursorVisible;

              this.el.setAttribute(
                "text",
                "value",
                this.output + (this.cursorVisible ? " " : this.data.cursorChar)
              );
            }
          }

          this.char++;
        }
      });
    </script>
  </head>
  <body>
    <div id="preloader">
      <div class="loader-logo text-center">
        <img
          src="https://beta-supercruisr.neocities.org/assets/white.png"
          alt=""
        />
        <p>Loading</p>
      </div>
    </div>

    <!-- Start Header -->

    <nav>
      <div class="logo">
        <a href="index.html"
          ><img
            src="https://beta-supercruisr.neocities.org/assets/white.png"
            alt="logo"
        /></a>
      </div>
      <div class="toggle-btn">
        <div class="burger-menu">
          <span class="one"></span>
          <span class="two"></span>
          <span class="tre"></span>
        </div>
      </div>

      <div class="bg-nav"></div>

      <div class="manu-container">
        <div class="menu">
          <div class="data">
            <div class="container">
              <div class="loader-image">
                <img
                  src="https://beta-supercruisr.neocities.org/assets/blackloader.png"
                  alt=""
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <a-scene
      networked-scene="
      room: audio;
      adapter: easyrtc;
      audio: true;
      debug: true"
    >
      <a-assets>
        <!-- Avatar -->
        <template id="avatar-template">
          <a-entity class="avatar" networked-audio-source>
            <a-sphere
              class="head"
              color="#5985ff"
              scale="0.45 0.5 0.4"
              random-color
            ></a-sphere>
            <a-entity class="face" position="0 0.05 0">
              <a-sphere
                class="eye"
                color="#efefef"
                position="0.16 0.1 -0.35"
                scale="0.12 0.12 0.12"
              >
                <a-sphere
                  class="pupil"
                  color="#000"
                  position="0 0 -1"
                  scale="0.2 0.2 0.2"
                ></a-sphere>
              </a-sphere>
              <a-sphere
                class="eye"
                color="#efefef"
                position="-0.16 0.1 -0.35"
                scale="0.12 0.12 0.12"
              >
                <a-sphere
                  class="pupil"
                  color="#000"
                  position="0 0 -1"
                  scale="0.2 0.2 0.2"
                ></a-sphere>
              </a-sphere>
            </a-entity>
          </a-entity>
        </template>
      </a-assets>
      <a-entity
        id="player"
        networked="template:#avatar-template;attachTemplateToLocal:false;"
        camera
        spawn-in-circle="radius:3;"
        position="0 1.3 0"
        wasd-controls
        look-controls
      >
        <a-cursor></a-cursor>
        <a-sphere class="head" visible="false" random-color></a-sphere>
      </a-entity>

      <a-entity
        environment="dressing: none; ground: flat; fog: 0; skyType: none; groundColor: #111;gridColor: #202020; grid: 2x2; groundTexture: none"
      ></a-entity>

      <a-entity
        id="catalog"
        scale="0.2 0.2 0.2"
        position="0 0.28 -1.05"
        rotation="-29.999999999999996 0 0"
      >
        <a-entity class="container" id="container" position="-3.15 4 0"
          ><a-image
            position=""
            width="2"
            height="1"
            link="href: /public/webar.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: WebAR"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-0"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="2.1 0 0"
            width="2"
            height="1"
            link="href: /public/villa.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: The Villa"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-1"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="4.2 0 0"
            width="2"
            height="1"
            link="href: /public/xr-broadcaster.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: XR Broadcaster"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-2"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="6.3 0 0"
            width="2"
            height="1"
            link="href: /public/virtual-con.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: VR Conference"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-3"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="0 -1.3 0"
            width="2"
            height="1"
            link="href: /public/videochat.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: Video Chat"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-4"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="2.1 -1.3 0"
            width="2"
            height="1"
            link="href: /public/video-player.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: Video Player"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-5"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="4.2 -1.3 0"
            width="2"
            height="1"
            link="href: /public/transmission.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: Media Tunnel"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-6"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="6.3 -1.3 0"
            width="2"
            height="1"
            link="href: /public/tour.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: Tour"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-7"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="0 -2.6 0"
            width="2"
            height="1"
            link="href: /public/room.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: Room"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-8"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="2.1 -2.6 0"
            width="2"
            height="1"
            link="href: /public/rooftop.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: Rooftop"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-9"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible=""
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="4.2 -2.6 0"
            width="2"
            height="1"
            link="href: /public/portfolio.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: Portfolio"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-10"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
          ><a-image
            position="6.3 -2.6 0"
            width="2"
            height="1"
            link="href: /public/office.html"
            src="undefined"
            event-set__enter="[object Object]"
            event-set__leave="[object Object]"
            material=""
            geometry=""
          >
            <a-entity
              geometry="primitive: plane; width: 2; height: 0.2"
              material="color: #111"
              text="align: center; value: Office"
              position="0 -0.6 0"
            ></a-entity>
            <a-plane
              id="highlight-11"
              width="2.05"
              height="1.25"
              material="shader: flat; color: white"
              position="0 -0.1 -0.01"
              visible="false"
              geometry=""
            ></a-plane> </a-image
        ></a-entity>
        <a-entity id="arrows" position="0 0.3 0.2">
          <a-image
            src="https://cdn.glitch.com/7036ea17-bd25-4354-8908-113fffc09696%2Farrow.png?v=1581554812160"
            id="nextArrow"
            position="1 0 0"
            width=".4"
            height=".25"
            rotation="0 0 90"
            clickable=""
            onclick="goNext();"
            material=""
            geometry=""
          ></a-image>

          <a-text
            id="pageCounter"
            position="-0.1 0 0"
            value="1"
            align="center"
            text=""
          ></a-text>
          <a-text
            id="pageTotal"
            position="0.08 0 0"
            value="/3"
            align="center"
            text=""
          ></a-text>
          <a-image
            src="https://cdn.glitch.com/7036ea17-bd25-4354-8908-113fffc09696%2Farrow.png?v=1581554812160"
            id="backArrow"
            position="-1 0 0"
            width=".4"
            height=".25"
            rotation="0 0 -90"
            clickable=""
            onclick="goBack();"
            material=""
            geometry=""
          ></a-image>
        </a-entity>

        <a-entity id="menu" position="-3.06 4.98 0" scale="0.35 0.35 0.35">
          <a-entity
            link="href: index.html"
            geometry="primitive: plane; width: 3.4"
            material="color: #606060"
            text="align: center; value: Home; width: 10"
            position=""
          >
          </a-entity>
          <a-entity
            link="href: chatrooms.html"
            geometry="primitive: plane; width: 3.4"
            material="color: #111"
            text="align: center; value: Chatrooms; width: 10"
            position="3.5 0 0"
          >
          </a-entity>
          <a-entity
            link="href: meditations.html"
            geometry="primitive: plane; width: 3.4"
            material="color: #111"
            text="align: center; value: Meditations; width: 10"
            position="7 0 0"
          >
          </a-entity>
          <a-entity
            link="href: webar.html"
            geometry="primitive: plane; width: 3.4"
            material="color: #111"
            text="align: center; value: WebAR; width: 10"
            position="10.5 0 0"
          >
          </a-entity>
          <a-entity
            link="href: music.html"
            geometry="primitive: plane; width: 3.4"
            material="color: #111"
            text="align: center; value: Music; width: 10"
            position="14 0 0"
          >
          </a-entity>
          <a-entity
            link="href: broadcasting.html"
            geometry="primitive: plane; width: 3.4"
            material="color: #111"
            text="align: center; value: Broadcasting; width: 10"
            position="17.5 0 0"
          >
          </a-entity>
        </a-entity>
      </a-entity>
    </a-scene>
    <script>
      // On mobile remove elements that are resource heavy
      var isMobile = AFRAME.utils.device.isMobile();

      if (isMobile) {
        var particles = document.getElementById("particles");
        particles.parentNode.removeChild(particles);
      }

      // Define custom schema for syncing avatar color, set by random-color
      NAF.schemas.add({
        template: "#avatar-template",
        components: [
          "position",
          "rotation",
          {
            selector: ".head",
            component: "material",
            property: "color"
          }
        ]
      });
    </script>
    <script src="assets/js/plugin.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
